{"name":"f0217451e6","creation":"2024-11-20 08:20:36.054481","modified":"2024-11-20 08:20:36.054481","modified_by":"deploymentmaster@lmnas.com","owner":"deploymentmaster@lmnas.com","docstatus":0,"idx":0,"deleted_name":"Design Title Beta","deleted_doctype":"Client Script","restored":0,"new_name":null,"data":"{\n \"creation\": \"2024-11-20 08:20:20.533800\",\n \"docstatus\": 0,\n \"doctype\": \"Client Script\",\n \"dt\": \"Design\",\n \"enabled\": 1,\n \"idx\": 0,\n \"modified\": \"2024-11-20 08:20:20.533800\",\n \"modified_by\": \"deploymentmaster@lmnas.com\",\n \"module\": null,\n \"name\": \"Design Title Beta\",\n \"owner\": \"deploymentmaster@lmnas.com\",\n \"script\": \"//In Earlier, we have the formation of the Design name \\n// as Rating/HV/LV/Impedance/Li Phase\\n// Now ,sometimes HV1 and HV2 or LV1 and Lv2 are present, \\n// so that change the formation\\n// as Rating/HV1/HV2/LV/Impedance/Li Phase \\n// or Rating/HV/LV1/LV2/Impedance/Li Phase.\\ncur_frm.cscript.custom_validate = function (doc) {\\n  function fnGetCleanString(iFloat, isHV) {\\n    if (iFloat === null || iFloat === undefined) {\\n      return \\\"\\\";\\n    }\\n    var lFloatInStr = isHV\\n      ? (parseFloat(iFloat) / 1000).toString()\\n      : iFloat.toString();\\n    // Remove trailing zeros after the decimal point\\n    lFloatInStr = lFloatInStr.replace(/(\\\\.\\\\d*?)0+$/, \\\"$1\\\");\\n    // Replace . with ,\\n    return lFloatInStr.replace(/\\\\./g, \\\",\\\");\\n  }\\n  function fnCombineVoltageValues(iV, iV1, iV2, isHV) {\\n    return iV\\n      ? fnGetCleanString(iV, isHV)\\n      : iV1 && iV2\\n      ? fnGetCleanString(iV1, isHV) + \\\"/\\\" + fnGetCleanString(iV2, isHV)\\n      : \\\"\\\";\\n  }\\n\\n  // Determine the impedance or uk values \\n  // based on factory and LV1 and LV2 fields\\n  function fnPutImpedanceOrUK() {\\n    if (doc.lv1 && doc.lv_2) {\\n      // If both LV1 and LV2 are present\\n      if (doc.factory === \\\"RGB\\\") {\\n        return (\\n          fnGetCleanString(doc.uk_lv1, false) +\\n          \\\"/\\\" +\\n          fnGetCleanString(doc.uk_lv2, false)\\n        );\\n      } else if (doc.factory === \\\"NEU\\\") {\\n        return (\\n          fnGetCleanString(doc.ukhv_lv1, false) +\\n          \\\"/\\\" +\\n          fnGetCleanString(doc.ukhv_lv2, false)\\n        );\\n      } else {\\n        // If factory is neither RGB nor NEU, return empty string\\n        return \\\"\\\";\\n      }\\n    } else {\\n      // If LV1 and LV2 are not both present, return impedance\\n      return doc.impedance || \\\"\\\";\\n    }\\n  }\\n\\n  // Generate document title based on field values\\n  var lDocTitle =\\n    doc.transformer_type +\\n    \\\" \\\" +\\n    doc.rating +\\n    \\\"/\\\" +\\n    fnCombineVoltageValues(doc.hv_rated_voltage, doc.hv1, doc.hv2, true) +\\n    \\\"/\\\" +\\n    fnCombineVoltageValues(doc.lv_rated_voltage, doc.lv1, doc.lv_2, false) +\\n    \\\"/\\\" +\\n    fnPutImpedanceOrUK() +\\n    \\\"/\\\" +\\n    doc.li_phase_hv;\\n\\n  // Set the document title\\n  doc.title = lDocTitle;\\n};\\n\",\n \"view\": \"Form\"\n}","_user_tags":null,"_comments":null,"_assign":null,"_liked_by":null}