{"name":"7fbd603a7d","creation":"2024-11-20 06:58:34.954769","modified":"2024-11-20 06:58:34.954769","modified_by":"deploymentmaster@lmnas.com","owner":"deploymentmaster@lmnas.com","docstatus":0,"idx":0,"deleted_name":"Item Description Modify","deleted_doctype":"Client Script","restored":0,"new_name":null,"data":"{\n \"creation\": \"2024-11-20 06:58:28.091552\",\n \"docstatus\": 0,\n \"doctype\": \"Client Script\",\n \"dt\": \"Item\",\n \"enabled\": 1,\n \"idx\": 0,\n \"modified\": \"2024-11-20 06:58:28.091552\",\n \"modified_by\": \"deploymentmaster@lmnas.com\",\n \"module\": null,\n \"name\": \"Item Description Modify\",\n \"owner\": \"deploymentmaster@lmnas.com\",\n \"script\": \"// Change References\\r\\n// Formation of Enclosure Item Description:(Issue# : ISS-2024-00004)\\r\\n//>> ISS-2024-00004\\r\\nfrappe.ui.form.on('Item', {\\r\\n    \\r\\n    validate(frm) {\\r\\n        \\r\\n        var lItemDescription = ''; // Declare variables for item description \\r\\n        var lIndex; // Declare the index variable\\r\\n        \\r\\n        //if there is no description or the description equals to empty editor value or the form is new \\r\\n        if (!frm.doc.description || frm.doc.description == '<div class=\\\"ql-editor read-mode\\\"><p><br></p></div>' || frm.is_new()) {\\r\\n            // Check if the item is a variant of another template item\\r\\n            if (frm.doc.variant_of) {\\r\\n                // The following are for Enclosures\\r\\n                // Find the index of 'Power (kVA)' attribute in the attributes array\\r\\n                lIndex = frm.doc.attributes.findIndex(element => element.attribute == \\\"Power (kVA)\\\");\\r\\n                // Add power to the Description if there is index\\r\\n                if (lIndex >= 0) {\\r\\n                    lItemDescription += '- ' + frm.doc.attributes[lIndex].attribute_value + [' [kVA]'] + ', '; \\r\\n\\r\\n                }\\r\\n\\r\\n                // Find the index of 'Enclosure IP Rating' attribute in the attributes array\\r\\n                lIndex = frm.doc.attributes.findIndex(element => element.attribute == \\\"Enclosure IP Rating\\\");\\r\\n                // Add IP rating to the Description if there is index\\r\\n                if (lIndex >= 0) {\\r\\n                    lItemDescription += 'Rating ' + frm.doc.attributes[lIndex].attribute_value + ', ';\\r\\n                }\\r\\n\\r\\n                // Find the index of 'Mounting Type' attribute in the attributes array\\r\\n                lIndex = frm.doc.attributes.findIndex(element => element.attribute == \\\"Mounting Type\\\");\\r\\n                // Add mounting to the Description if there is index\\r\\n                if (lIndex >= 0) {\\r\\n                    lItemDescription += frm.doc.attributes[lIndex].attribute_value;\\r\\n                }\\r\\n\\r\\n                // Add the Accessories specification header\\r\\n                if (lItemDescription) {\\r\\n                    lItemDescription = 'Accessories specification:<br>' + lItemDescription;\\r\\n                }\\r\\n            }\\r\\n\\r\\n            // If no description is built, fill item description as 'Item Group specification:'\\r\\n            if (!lItemDescription) {\\r\\n                lItemDescription = '<p>' + frm.doc.item_group + ' specification:' + '</p>';\\r\\n            }\\r\\n            \\r\\n            //set the description\\r\\n            cur_frm.set_value(\\\"description\\\", lItemDescription);\\r\\n        }\\r\\n    },\\r\\n});\\r\\n// << ISS-2024-00004\",\n \"view\": \"Form\"\n}","_user_tags":null,"_comments":null,"_assign":null,"_liked_by":null}     // Add mounting to the Description if there is index\\r\\n          if (lIndex >= 0) {\\r\\n            lItemDescription += frm.doc.attributes[lIndex].attribute_value;\\r\\n          }\\r\\n  \\r\\n          //>>ISS-2024-00004\\r\\n          //Cooling method not include in the item descrtion \\r\\n          // for the Enclosure template\\r\\n          // Find the index of 'Cooling Method' attribute in the attributes array\\r\\n          // lIndex = frm.doc.attributes.findIndex(element => element.attribute==\\\"Cooling Method\\\");\\r\\n          // if(lIndex>=0){\\r\\n  \\r\\n          // lItemDescription   = lItemDescription + ','  + ' Cooling Method: ' + (frm.doc.attributes[lIndex].attribute_value).toString();\\r\\n  \\r\\n          // } //<<ISS-2024-00004\\r\\n          if (lItemDescription) {\\r\\n            lItemDescription =\\r\\n              \\\"Accessories specification:<br>\\\" + lItemDescription;\\r\\n          }\\r\\n        } // if(frm.doc.variant_of)\\r\\n        //Fill item description as 'Item Group specification:' \\r\\n        // if nothing is filled from Above\\r\\n        if (!lItemDescription) {\\r\\n          lItemDescription =\\r\\n            \\\"<p>\\\" + frm.doc.item_group + \\\" specification:\\\" + \\\"</p>\\\";\\r\\n        }\\r\\n        cur_frm.set_value(\\\"description\\\", lItemDescription);\\r\\n      }\\r\\n    },\\r\\n    fnSetAttributesToEdit(frm) {\\r\\n      // Allow Edit of Item Variants table after validation error and before save\\r\\n      frm.set_df_property(\\r\\n        \\\"attributes\\\",\\r\\n        \\\"read_only\\\",\\r\\n        frm.is_new() || frm.doc.has_variants ? 0 : 1\\r\\n      );\\r\\n    },\\r\\n  });\\r\\n  \",\n \"view\": \"Form\"\n}","_user_tags":null,"_comments":null,"_assign":null,"_liked_by":null}