{"name":"Order Confirmation","owner":"wesupport@lmnas.com","creation":"2024-10-05 14:53:45.927983","modified":"2025-06-19 14:51:59.375184","modified_by":"wesupport@lmnas.com","docstatus":0,"idx":0,"doc_type":"Sales Order","module":"Selling","default_print_language":"en","standard":"No","custom_format":0,"disabled":0,"print_format_type":"Jinja","raw_printing":0,"html":null,"raw_commands":null,"margin_top":15,"margin_bottom":15,"margin_left":15,"margin_right":15,"align_labels_right":0,"show_section_headings":0,"line_breaks":0,"absolute_value":0,"font_size":14,"font":null,"page_number":"Hide","css":".print-format .row:not(.section-break) {\n    line-height: 1.2 !important;\n    margin-top: 0px !important;\n    margin-bottom: 3px !important;\n}\n.print-format th {\n    font-weight: bold;\n    margin-botton: 0px !important\n}\n.letter-head { \n    margin-bottom: 10px !important;\n    margin-top: -20px !important;\n}\n.hidden-pdf { \n    margin-top: -20px !important;\n}\n.info { \n    line-height: 1 !important;\n}\n.print-format .value {\n    line-height: 1.5;\n}\n.header-border {\n  border-style: solid;\n  border-color:#a1a1aa;\n  border-width: thin\n\n}\n.header-border-bottom{\n  border-bottom: thin solid;\n  border-color:#a1a1aa;\n\n}\n.border-top{\n  border-top: thin solid;\n  border-color:#4b5563\n\n}\n.border-bottom{\n  border-bottom: thin solid;\n  border-color:#4b5563  \n}\n.bg-grey { \n    background-color:#e0e0e0;\n}\n.x-pad{ \n  padding-left: 5px;\n  padding-right:5px;\n}\n.print-format label {\n\n    color: #808080;\n\n}\n.print-format p { \n    margin: 0 !important;\n}\n.header-color {\n\n    color: #808080;\n\n}\n.margin-header{ \n    margin-top: 10px;\n}\ntable { \n    border-color: #111827;\n}\nthead { \n     border-color: #111827;\n}\ntr { \n     border-color: #111827;\n}\n\n.table>thead>tr>th, .table>tbody>tr>th, .table>tfoot>tr>th, .table>thead>tr>td, .table>tbody>tr>td, .table>tfoot>tr>td {\n\n   border-top: 0 !important; \n   color:#111827;\n}\n.table>thead>tr>th {\n    vertical-align: bottom;\n    border-bottom: solid #111827;;\n}\n\nintro {\n    font-size:13.33px;\n}\nthead { \n    font-size:15px;\n}\n.item-main {\n     font-size:15px;\n}\n.item-description { \n    font-size:12px;\n \n}\n.net-total{\n    font-size:19px;\n}\nterms { \n   font-size:13px; \n   overflow: hidden;\n}\nfont-color { \n    color:#111827;\n}\n.ql-editor{ \n    color:#111827 !important; \n    overflow: hidden;\n}\ntotal{\n break-inside: avoid;\n}\n\n.lltd{ \n    padding-left: 10px !important;\n    padding-right:10px !important;\n}\nfooter {\n    padding-top: 10px;\n    padding-bottom: 10px;\n}","format_data":"[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div ></div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{%- set la_contact_list = frappe.get_list('Contact', filters={'name': doc.agent}, fields=['phone', 'email_id']) -%}\\n{%- set ld_contact = la_contact_list[0] if la_contact_list else {} -%}\\n{%- set l_contact_phone = ld_contact.phone if ld_contact else None -%}\\n{%- set l_contact_email = ld_contact.email_id if ld_contact else None -%}\\n\\n<div class=\\\"row \\\">\\n    <div class=\\\"col-xs-5 mt-4\\\">\\n        <div class=\\\"row data-field\\\" data-fieldname=\\\"address_display\\\" data-fieldtype=\\\"Small Text\\\">\\n            <div class=\\\"col-xs-12 value\\\">\\n                <label>{{ doc.customer_name }}</label>\\n                <label>{{ doc.address_display }}</label>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"col-xs-7 mt-4\\\">\\n        <div class=\\\"header-border\\\">\\n            <div class=\\\"row data-field\\\" data-fieldname=\\\"name\\\" data-fieldtype=\\\"Data\\\">\\n                <div class=\\\"col-xs-12\\\">\\n                    <label style=\\\"font-size:18.3px;\\\" class='bg-grey header-border-bottom'>\\n                        <div class=\\\"px-1\\\">\\n                            <strong class='header-color'>{{ _(\\\"Order Confirmation\\\") }}</strong>\\n                        </div>\\n                    </label>\\n                </div>\\n            </div>\\n      \\n            {%- set ld_ns = namespace(sap_reference=None, found=False) -%}\\n            {%- set la_sales_order_items = frappe.get_all('Sales Order Item', filters={'parent': doc.name}, fields=['pos', 'sap_reference']) -%}\\n    \\n            {%- for ld_item in la_sales_order_items -%}\\n                {%- if not ld_ns.found and ld_item.pos is not none and (ld_item.pos | float) % 10 == 0 -%}\\n                    {%- set ld_ns.sap_reference = ld_item.sap_reference -%}\\n                    {%- set ld_ns.found = True -%} {# Mark that we've found a reference #}\\n                {%- endif -%}\\n            {%- endfor -%}\\n    \\n            {%- if ld_ns.sap_reference -%}\\n                {%- set l_sap_reference_trimmed = ld_ns.sap_reference.split('/')[0] -%}\\n            {%- else -%}\\n                {%- set l_sap_reference_trimmed = 'None' -%}\\n            {%- endif -%}\\n    \\n            <div class=\\\"row data-field px-1\\\" data-fieldname=\\\"name\\\" data-fieldtype=\\\"Data\\\">\\n                <div class=\\\"col-xs-5\\\">\\n                    <label>{{ _(\\\"Order Number\\\") }}: </label>\\n                </div>\\n                <div class=\\\"col-xs-7 text-right\\\">\\n                    <!--<label>{{ doc.po_no }}</label>-->\\n                    <label>{{ l_sap_reference_trimmed }}</label>\\n                </div>\\n            </div>\\n            {% set l_address = frappe.get_doc('Address', doc.customer_address) %}\\n            <div class=\\\"row data-field px-1\\\" data-fieldname=\\\"vat_number\\\" data-fieldtype=\\\"Data\\\">\\n                <div class=\\\"col-xs-6\\\">\\n                    <label>{{ _(\\\"Customer's PO number\\\") }}: </label>\\n                </div>\\n                <div class=\\\"col-xs-6 text-right\\\">\\n                    <label>{{ doc.po_no }}</label>\\n                </div>\\n            </div>\\n            <!--<div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"contact_display\\\" data-fieldtype=\\\"Data\\\">-->\\n            <!--  <div class=\\\"col-xs-6\\\">-->\\n            <!--    <label>{{ _(\\\"Customer Contact\\\") }}: </label>-->\\n            <!--  </div>-->\\n            <!--  <div class=\\\"col-xs-6 text-right\\\">-->\\n            <!--    <label>{{ doc.contact_person }}</label>-->\\n            <!--  </div>-->\\n            <!--</div>-->\\n            <div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"company_contact\\\" data-fieldtype=\\\"Link\\\">\\n                <div class=\\\"col-xs-6\\\">\\n                <label>{{ _(\\\"Contact person\\\") }}:</label>\\n            </div>\\n            <div class=\\\"col-xs-6 text-right\\\">\\n                <label>{{ doc.agent }}</label>\\n            </div>\\n        </div>\\n        <div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"contact_phone\\\" data-fieldtype=\\\"Data\\\">\\n            <div class=\\\"col-xs-5\\\">\\n                <label>{{ _(\\\"Phone\\\") }}:</label>\\n            </div>\\n            <div class=\\\"col-xs-7 text-right\\\">\\n                <label>{{ l_contact_phone }}</label>\\n            </div>\\n        </div>\\n        <div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"ll_compaagentl\\\" data-fieldtype=\\\"Date\\\">\\n            <div class=\\\"col-xs-3\\\">\\n                <label>{{ _(\\\"E-mail\\\") }}:</label>\\n            </div>\\n            <div class=\\\"col-xs-9 value text-right\\\">\\n                <label>{{ l_contact_email }}</label>\\n            </div>\\n        </div>\\n        <!--commented this block of code, confirmation date is not required-->\\n        <!--<div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"t\\\" data-fieldtype=\\\"Date\\\">-->\\n        <!--  <div class=\\\"col-xs-5\\\">-->\\n        <!--    <label>{{ _(\\\"Confirmation Date\\\") }}:</label>-->\\n        <!--  </div>-->\\n        <!--  <div class=\\\"col-xs-7 text-right\\\">-->\\n        <!--    <label>{{ doc.get_formatted('custom_confirmation_date') }}</label>-->\\n        <!--  </div>-->\\n        <!--</div>-->\\n        <div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"document_date\\\" data-fieldtype=\\\"Date\\\">\\n            <div class=\\\"col-xs-5\\\">\\n                <label>{{ _(\\\"Document date\\\") }}: </label>\\n            </div>\\n            <div class=\\\"col-xs-7 text-right\\\">\\n                <label>{{ doc.get_formatted('transaction_date') }}</label>\\n            </div>\\n        </div>\\n        <div class=\\\"info row data-field px-1\\\" data-fieldname=\\\"t\\\" data-fieldtype=\\\"Date\\\">\\n            <div class=\\\"col-xs-5\\\">\\n                <label>{{ _(\\\"Date of delivery\\\") }}:</label>\\n            </div>\\n            <div class=\\\"col-xs-7 text-right\\\">\\n                <label>{{ doc.get_formatted('delivery_date') }}</label>\\n            </div>\\n        </div>\\n    </div>\\n  </div>\\n</div>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"\\n<div class=\\\"row\\\">\\n    <!-- Shipping Address Section -->\\n    <div class=\\\"col-xs-5 mt-4\\\">\\n        <div class=\\\"row data-field\\\" data-fieldname=\\\"shipping_address\\\" data-fieldtype=\\\"Small Text\\\">\\n            <div class=\\\"col-xs-12 value\\\">\\n                <label>{{ _(\\\"Ship To\\\") }}</label>\\n                <p>{{doc.shipping_address_name}}</p> \\n                <p>{{ doc.shipping_address }}</p>\\n            </div>\\n        </div>\\n    </div>\\n    \\n    <!-- Invoice To Address Section -->\\n    <div class=\\\"col-xs-7 mt-4\\\">\\n        <div class=\\\"row data-field\\\" data-fieldname=\\\"invoice_to_address\\\" data-fieldtype=\\\"Small Text\\\">\\n            <div class=\\\"col-xs-12 value\\\">\\n                <label>{{ _(\\\"Invoice To\\\") }}</label>\\n                \\n                <p>{{ doc.customer_address }}</p> \\n                <p>{{ doc.address_display }}</p>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n\\n<font-color>\\n<intro>\\n\\t<div style=\\\"margin-top:30px\\\">\\n\\t<div class=\\\"row important data-field\\\" data-fieldname=\\\"project_name\\\" data-fieldtype=\\\"Data\\\">\\n        <div class=\\\"col-xs-12 text-left value\\\">\\n            {{ _(\\\"Your order\\\") }} {{ doc.po_no }} {{ _(\\\"dated\\\") }} {{doc.get_formatted('po_date') }}\\n        </div>\\n\\t</div>\\n\\n\\t<div class=\\\"row  data-field \\\" data-fieldname=\\\"thank_you_text\\\" data-fieldtype=\\\"Data\\\">\\n        <div class=\\\"col-xs-12 text-left mt-2\\\">\\n\\t\\t\\t{{ _(\\\"Thank you for your order,\\\") }} {{ _(\\\" which we execute according to the following agreement\\\") }}{{ _(\\\": Orgalime S 2012\\\") }}. <br>\\n\\t\\t\\t<br>\\n<div class=\\\"row mt-2\\\">\\n    <!-- Left Section -->\\n    <!--{%- set sales_team = frappe.get_all('Sales Team', filters={'parent': doc.name}, fields=['sales_person']) -%}-->\\n    <!--{%- set sales_person_name = sales_team[0].sales_person if sales_team else '' -%}-->\\n    <!--<div class=\\\"col-xs-6\\\">-->\\n    <!--    <label style=\\\"color: black;\\\">{{ _(\\\"Your contact person for technical issues\\\") }}</label>-->\\n    <!--    <div class=\\\"data-field\\\" data-fieldname=\\\"left_contact\\\" data-fieldtype=\\\"Small Text\\\">-->\\n    <!--        <div class=\\\"value\\\">-->\\n    <!--            <p>{{ sales_person_name }}</p>-->\\n    <!--            <p>{{ doc.contact_phone }}</p>-->\\n    <!--            <p>{{ doc.contact_email }}</p>-->\\n    <!--        </div>-->\\n    <!--    </div>-->\\n    <!--</div>-->\\n    \\n{%- set la_sales_team = frappe.get_all('Sales Team', filters={'parent': doc.name}, fields=['sales_person']) -%}\\n{%- set l_sales_person_name = la_sales_team[0].sales_person if la_sales_team else None -%}\\n\\n{%- if l_sales_person_name -%}\\n    {%- set ld_sales_person = frappe.get_doc('Sales Person', l_sales_person_name) -%}\\n    {%- set l_custom_contact = ld_sales_person.custom_contact if ld_sales_person else None -%}\\n    \\n    {%- if l_custom_contact -%}\\n        {%- set l_contact_name = l_custom_contact -%}\\n\\n        {%- set la_phone_details = frappe.get_all('Contact Phone', filters={'parent': l_contact_name, 'is_primary_phone': 1}, fields=['phone']) -%}\\n        {%- set la_email_details = frappe.get_all('Contact Email', filters={'parent': l_contact_name, 'is_primary': 1}, fields=['email_id']) -%}\\n\\n        {%- set l_contact_phone = la_phone_details[0].phone if la_phone_details else None -%}\\n        {%- set l_contact_email = la_email_details[0].email_id if la_email_details else None -%}\\n    {%- else -%}\\n        {%- set l_contact_phone = None -%}\\n        {%- set l_contact_email = None -%}\\n    {%- endif -%}\\n{%- else -%}\\n    {%- set l_contact_phone = None -%}\\n    {%- set l_contact_email = None -%}\\n{%- endif -%}\\n\\n{%- set la_contact_list = frappe.get_list('Contact', filters={'name': doc.agent}, fields=['phone', 'email_id']) -%}\\n{%- set ld_contact = la_contact_list[0] if la_contact_list else {} -%}\\n<div class=\\\"col-xs-6\\\">\\n    <label style=\\\"color: black;\\\">{{ _(\\\"Your contact person for technical issues\\\") }}:</label>\\n    <div class=\\\"data-field\\\" data-fieldname=\\\"left_contact\\\" data-fieldtype=\\\"Small Text\\\">\\n        <div class=\\\"value\\\">\\n            <p>{{ l_sales_person_name }}</p>\\n            <p>{{ l_contact_email }}</p>\\n            <p>{{ l_contact_phone }}</p>\\n        </div>\\n    </div>\\n</div>\\n    \\n    <!-- Right Section -->\\n    <!--{%- set user_doc = frappe.get_doc('User', doc.owner) -%}-->\\n    <!--{%- set user_full_name = user_doc.full_name if user_doc else None -%}-->\\n    <!--{%- set user_phone = user_doc.phone if user_doc else None -%}-->\\n    \\n    <!--{%- set contact_list = frappe.get_list('Contact', filters={'name': doc.agent}, fields=['phone', 'email_id']) -%}-->\\n    <!--{%- set ld_contact = contact_list[0] if contact_list else {} -%}-->\\n    \\n    <div class=\\\"col-xs-6\\\">\\n        <label style=\\\"color: black;\\\">{{ _(\\\"Your contact person for logistic issues\\\") }}:</label>\\n        <div class=\\\"data-field\\\" data-fieldname=\\\"right_contact\\\" data-fieldtype=\\\"Small Text\\\">\\n            <div class=\\\"value\\\">\\n                <p>{{ doc.agent }}</p>\\n                <p>{{ ld_contact.email_id if ld_contact.email_id else 'None'}}</p>\\n                <p>{{ ld_contact.phone if ld_contact.phone else 'None'}}</p>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\t\\t</div>\\n\\t</div>\\n\\t\\n\\t</div>\\n</intro>\\n</font-color>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Items\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<font-color>\\n<div data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n    <table class=\\\"table table-borderless\\\">\\n        <thead class=\\\"font-weight-bold\\\">\\n            <tr>\\n                <th style=\\\"width: 40px\\\">{{ _(\\\"Pos\\\") }}.</th>\\n                <th style=\\\"width: 225px;\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n                    {{ _(\\\"Material\\\") }} / {{ _(\\\"Desc.\\\") }}\\n                </th>\\n                <th style=\\\"width: 85px;\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n                    {{ _(\\\"Quantity\\\") }}\\n                </th>\\n                <th style=\\\"width: 140px; white-space: nowrap; text-align: center\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n                    {{ _(\\\"Unit price/1PC\\\") }}\\n                </th>\\n                <th style=\\\"width: 155px; text-align: center\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n                    {{ _(\\\"Total price\\\") }}\\n                </th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            {%- for idx, ld_item in enumerate(doc.items) -%}\\n            {%- set ld_item_doc = frappe.get_doc(\\\"Item\\\", ld_item.item_code) -%}\\n            <tr class='item-main border-top'>\\n                <td class=\\\"table-sr\\\" data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n                    {%- if (ld_item.pos % 10) > 0 -%} \\n                        {{ ld_item.pos }} \\n                    {%- else -%} \\n                        {{ ld_item.pos|int }}  \\n                    {%- endif -%}\\n                </td>\\n                <td colspan=4 data-fieldname=\\\"items\\\" data-fieldtype=\\\"Table\\\">\\n                    <div style='margin-left:-10px; margin-right:-10px' class=\\\"row\\\">\\n                        <lltd style=\\\"width: 220px\\\" class=\\\"col-xs-2 lltd\\\">\\n                            <div>\\n                                {%- if (ld_item.pos % 10) > 0 -%}\\n                                    {%- set ld_item_group = frappe.get_doc(\\\"Item Group\\\", ld_item_doc.item_group).as_dict() -%}\\n                                    {%- set l_item_group_text = (\\n                                        ld_item_group.old_parent \\n                                        if ld_item_group.old_parent == 'Accessories'\\n                                        else ld_item.item_group ) -%}\\n                                    {{ _(l_item_group_text) }} {{ _(\\\"for position\\\") }} {{ ld_item.pos|round(0, 'floor')|int }}\\n                                {%- else -%}\\n                                    {{ ld_item_doc.item_name }}\\n                                {%- endif -%}\\n                            </div>\\n                        </lltd>\\n                        \\n                        <lltd style=\\\"width: 88px\\\" class=\\\"col-xs-1 lltd\\\">\\n                            <div> {{ ld_item.qty|int }} {{ _(ld_item.uom) }}</div>\\n                        </lltd>\\n                        <lltd style=\\\"width: 144px; white-space: nowrap;\\\" class=\\\"col-xs-3 text-right lltd\\\">\\n                            <div>\\n                                {{ ld_item.get_formatted(\\\"rate\\\") }} {{ doc.currency }}\\n                            </div>\\n                        </lltd>\\n                        <lltd style=\\\"width: 144px; white-space: nowrap;\\\" class=\\\"col-xs-3 text-right lltd\\\">\\n                            <div>\\n                                {{ ld_item.get_formatted(\\\"amount\\\") }} {{ doc.currency }}\\n                            </div>\\n                        </lltd>\\n                    </div>\\n                    <lltd>\\n                        {%- if (ld_item.pos % 10) > 0 -%}\\n                            <br>\\n                            <strong class='item-description'> {{ _(ld_item.item_name) }}</strong>\\n                            <br><br>\\n                            <div class=\\\"ql-snow item-description\\\">{{ _(ld_item.description) }}</div>\\n                        {%- else -%}   \\n                            <br>\\n                            <strong class='item-description'> {{ ld_item_doc.item_technical_name.replace('HV', _( 'HV') ).replace('LV', _( 'LV')) }}</strong>\\n                            <br><br>\\n                            <div class=\\\"ql-snow item-description\\\">{{ _(ld_item.description) }}</div>\\n                        {%- endif -%}\\n                    </lltd>\\n                </td>\\n            </tr>\\n            {%- endfor -%}\\n        </tbody>\\n    </table>\\n</div>\\n</font-color>\\n\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<br>\\n\\n<style>\\n    .remove-padding {\\n        padding-right: 0px;\\n        padding-left: 0px;\\n    }\\n    .remove-left-padding {\\n        padding-left: 0px;\\n    }\\n    .mb-discount { \\n        margin-bottom: 24px !important;\\n    }\\n</style>\\n<div style=\\\"margin-left: 280px;\\\">\\n{%- if doc.discount_amount or doc.total_taxes_and_charges -%}\\n<div class=\\\"net-total\\\">\\n<div  style=\\\"margin-botton: 24px;\\\" class=\\\"row  data-field border-top \\\" data-fieldname=\\\"net_total\\\" data-fieldtype=\\\"Currency\\\">\\n    \\t<div class=\\\"col-xs-5 remove-padding\\\">\\n    \\t    {{ _(\\\"Total\\\") }}:\\n    \\t</div>\\n    \\t<div class=\\\"col-xs-7 remove-left-padding text-right value\\\">\\n    \\t\\t{{doc.get_formatted(\\\"total\\\")}} {{doc.currency }}\\n    \\t</div>\\n    \\n</div>    \\n{%- if doc.discount_amount -%}\\n<div  style=\\\"margin-botton: 24px;\\\" class=\\\"row  data-field\\\" data-fieldname=\\\"net_total\\\" data-fieldtype=\\\"Currency\\\">\\n    \\t<div class=\\\"col-xs-6 remove-padding\\\">\\n    \\t    {{ _(\\\"Discount\\\") }}\\n    \\t    {%- if doc.additional_discount_percentage -%} {{' '}}{{doc.get_formatted(\\\"additional_discount_percentage\\\")}}  %{%- endif -%}\\n    \\t</div>\\n    \\t<div class=\\\"col-xs-6 remove-left-padding text-right value\\\">\\n    \\t\\t{{doc.get_formatted(\\\"discount_amount\\\")}} {{doc.currency }}\\n    \\t</div>\\n    \\n</div>\\n{%- endif -%}\\n\\n{%- if doc.total_taxes_and_charges -%}\\n<div  style=\\\"margin-botton: 24px;\\\" class=\\\"row  data-field border-top\\\" data-fieldname=\\\"net_total\\\" data-fieldtype=\\\"Currency\\\">\\n    \\t<div class=\\\"col-xs-6 remove-padding\\\">\\n    \\t    {{ _(\\\"VAT\\\") }} 21%:\\n    \\t</div>\\n    \\t<div class=\\\"col-xs-6 remove-left-padding text-right value\\\">\\n    \\t\\t{{doc.get_formatted(\\\"total_taxes_and_charges\\\")}} {{doc.currency }}\\n    \\t</div>\\n    \\n</div>\\n{%- endif -%}\\n\\n</div>\\n{%- endif -%}\\n\\n<total>\\n<font-color>\\n<div class=\\\"row  data-field net-total border-top border-bottom\\\" data-fieldname=\\\"net_total\\\" data-fieldtype=\\\"Currency\\\">\\n    \\t<div class=\\\"col-xs-6 remove-padding\\\">\\n    \\t    {%- if doc.total_taxes_and_charges -%}\\n    \\t        <b>{{ _(\\\"Cena celkem s DPH\\\") }}:</b>\\n    \\t    {%- else -%}\\n    \\t        <b>{{ _(\\\"Net Total\\\") }}:</b>\\n    \\t    {%- endif -%}\\n    \\t</div>\\n    \\t<div class=\\\"col-xs-6 remove-left-padding text-right value\\\">\\n    \\t    {%- if doc.total_taxes_and_charges -%}\\n    \\t\\t    <b>{{doc.get_formatted(\\\"rounded_total\\\")}} {{doc.currency }}</b>\\n    \\t\\t{%- else -%}\\n    \\t\\t    <b>{{doc.get_formatted(\\\"net_total\\\")}} {{doc.currency }}</b>\\n    \\t\\t{%- endif -%}\\n    \\t</div>\\n    \\n</div>\\n</font-color>\\n</total>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<terms class='py-3'>\\n<font-color>\\n<div class=\\\"row  data-field pt-3\\\" data-fieldname=\\\"payment_terms_template\\\" data-fieldtype=\\\"Link\\\">\\n    <div class=\\\"col-xs-12\\\">\\n        {{ _(\\\"Terms of payment\\\") }}: {{ _(doc.payment_terms_template) }}\\n    </div>\\n</div>\\n{%- set la_quotation = frappe.get_all('Quotation', filters={'customer_name': doc.customer}, fields=['delivery_time', 'delivery_text'], limit=1) -%}\\n{%- if la_quotation and la_quotation[0] -%}\\n    <!--<div class=\\\"row data-field\\\" data-fieldname=\\\"delivery_time\\\" data-fieldtype=\\\"Data\\\">-->\\n    <!--    <div class=\\\"col-xs-12\\\">-->\\n    <!--        {{ _(\\\"Delivery time\\\") }}: {{ _(doc.delivery_date) }}-->\\n    <!--    </div>-->\\n    <!--</div>-->\\n{%- else -%}\\n    <div class=\\\"row data-field\\\" data-fieldname=\\\"delivery_time\\\" data-fieldtype=\\\"Data\\\">\\n        <div class=\\\"col-xs-12\\\">\\n            {{ _(\\\"Delivery time not found for the customer.\\\") }}\\n        </div>\\n    </div>\\n{%- endif -%}\\n\\n    \\n{%- set l_customer = frappe.get_doc('Customer', doc.customer) -%}\\n<div class=\\\"row data-field\\\" data-fieldname=\\\"ll_packaging\\\" data-fieldtype=\\\"Select\\\">\\n    <div class=\\\"col-xs-12\\\">\\n        <!--{{ _(\\\"Packaging\\\") }}: {{ _(doc.custom_packaging) }}-->\\n        {{ _(\\\"Packaging\\\") }}: {{ _(doc.custom_packaging if doc.custom_packaging else \\\"Without Packaging\\\") }}\\n    </div>\\n</div>\\n<div class=\\\"row  data-field\\\" data-fieldname=\\\"incoterms\\\" data-fieldtype=\\\"Select\\\">\\n    <div class=\\\"col-xs-12\\\">\\n       {{ _(\\\"Terms Of Delivery\\\") }}: {{ _(doc.incoterms) }}\\n    </div>\\n</div>\\n\\n<div class=\\\"row data-field\\\" data-fieldname=\\\"warranty\\\" data-fieldtype=\\\"Select\\\">\\n    <div class=\\\"col-xs-12\\\">\\n        <!--ISS-2025-00092>>-->\\n        <!--Previously, we received the warranty from the customer;\\n        now it comes from the sales order.-->\\n        {%- set l_warranty = doc.custom_warranty|int -%}\\n        {{ _(\\\"Warranty\\\") }}: {{ l_warranty - 6}} {{ _(\\\"months after commissioning, however not exceeding\\\") }} {{l_warranty}} {{ _(\\\"months of delivery.\\\") }} \\n       <!--<<ISS-2025-00092-->\\n    </div>\\n</div>\\n<!--{% set address = frappe.get_doc('Address', doc.customer_address) %}-->\\n<!--<div class=\\\"row data-field\\\" data-fieldname=\\\"shipping_address\\\" data-fieldtype=\\\"Small Text\\\">-->\\n<!--    <div class=\\\"col-xs-12\\\">-->\\n<!--        {{ _(\\\"Location\\\") }}: {{ address.city }}, {{ address.country }}-->\\n<!--    </div>-->\\n<!--</div>-->\\n</font-color>\\n</terms>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<br> <br>\\n<div class=\\\"row mt-4\\\">\\n  <div class=\\\"col-xs-12\\\">\\n    <div class=\\\"row data-field px-1\\\" data-fieldname=\\\"terms_and_conditions\\\" data-fieldtype=\\\"Text\\\">\\n      <div class=\\\"col-xs-12\\\">\\n        <p>{{ doc.terms }}</p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"}]","print_format_builder":0,"print_format_builder_beta":0}